import{r as d,_ as T,R as v,b as S,c as M,P as h,d as R,x as q,k as O,j as e,C as k}from"./index-DEY1PMoh.js";import{a as L,b as W,p as D}from"./api-BPZF7uhT.js";import{b as F,c as B,a as Z}from"./index.es-CF7RcR2S.js";import{u as K,T as V,C as _,a as H,b as N,c as w,d as $,e as U}from"./DefaultLayout-DUukpwuf.js";import{C as z}from"./CForm-CiCaL2UW.js";import{C as t}from"./CCol-DcPiv48i.js";import{C as o}from"./CFormControlWrapper-D0lenDls.js";import{C as n}from"./CFormInput-C7q9roG_.js";import{C as P}from"./CFormSelect-SX0t-rQr.js";import"./cil-user-Ddrdy7PS.js";var E=d.forwardRef(function(l,f){var j=l.children,I=l.className,p=l.color,m=p===void 0?"primary":p,x=l.dismissible,y=l.variant,s=l.visible,u=s===void 0?!0:s,a=l.onClose,g=T(l,["children","className","color","dismissible","variant","visible","onClose"]),c=d.useRef(null),C=K(f,c),r=d.useState(u),b=r[0],i=r[1];return d.useEffect(function(){i(u)},[u]),v.createElement(V,{in:b,mountOnEnter:!0,nodeRef:c,onExit:a,timeout:150,unmountOnExit:!0},function(A){return v.createElement("div",S({className:M("alert",y==="solid"?"bg-".concat(m," text-white"):"alert-".concat(m),{"alert-dismissible fade":x,show:A==="entered"},I),role:"alert"},g,{ref:C}),j,x&&v.createElement(_,{onClick:function(){return i(!1)}}))})});E.propTypes={children:h.node,className:h.string,color:R.isRequired,dismissible:h.bool,onClose:h.func,variant:h.string,visible:h.bool};E.displayName="CAlert";var G=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M311.145,257.6c5.5-9.032,11.185-18.371,16.8-28,18.794-32.218,22.243-64.681,10.254-96.489C314.008,68.933,233.142,29.83,214.421,23.591L201.257,19.2,180.711,60.3l9.915,8.1c.111.089,11.124,9.712,11.858,24.3.627,12.453-6.2,25.91-20.286,40-9.782,9.781-20.518,19.239-31.885,29.251C102.487,204.069,48.28,251.82,48.28,342.154q0,1.861.035,3.7a151.362,151.362,0,0,0,46.444,106.49A154.177,154.177,0,0,0,202.583,496h92.1l-11.369-23.072C237.121,379.177,269.788,325.525,311.145,257.6ZM202.583,464c-66.2,0-121.05-53.267-122.274-118.739q-.028-1.546-.029-3.107c0-75.878,46.356-116.713,91.186-156.2,11.239-9.9,22.862-20.138,33.359-30.637,20.754-20.753,30.719-42.365,29.619-64.232a64.963,64.963,0,0,0-7.214-26.56c27.84,15.211,67.523,44.053,81.027,79.877,8.544,22.665,5.943,45.26-7.951,69.079-5.465,9.369-11.072,18.576-16.493,27.481C244.132,306.131,206.49,367.943,244.361,464Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M468.243,341.129q-.4-1.586-.834-3.185c-11.546-42.332-75.457-96.762-82.706-102.829l-14.557-12.182L360.6,239.341c-21.753,37.4-40.421,71.512-48.559,110.212-9.279,44.134-3.033,88.989,19.1,137.13L335.422,496H346.3a125.168,125.168,0,0,0,99.3-48.5A123.175,123.175,0,0,0,468.243,341.129Zm-47.88,86.683a93.3,93.3,0,0,1-64.44,35.7c-31.541-75.9-12.931-127.635,22.63-191.114,23.642,21.994,52.455,53.69,57.983,73.961q.349,1.283.669,2.554A91.372,91.372,0,0,1,420.363,427.812Z' class='ci-primary'/>"];const le=()=>{const{id:l}=q(),f=O(),[j,I]=d.useState([]),[p,m]=d.useState({hasError:!1,errorMessage:""}),[x,y]=d.useState(!0),[s,u]=d.useState({UserID:0,FullName:"",IDNumber:"",Email:"",PhoneOffice:"",Phone:"",Address:"",PostCode:"",City:"",TypeUserID:"",IsAllowToMoveExpiredRecord:"",StatusID:"",CountryID:"",UserName:"",IsEdit:!1,Password:"",ConfirmPassword:""});d.useEffect(()=>{l&&l!=0&&L(l,1).then(r=>{if(r.error){f(-1,{isErrorMessage:!0,message:"Some things went wrong. Try again later."});return}else r.data.data.IsEdit=!0,u(r.data.data)}),W("",1,0,1e4).then(r=>{I(r.data.data.data)}),y(!1)},[]);const a=r=>{const{name:b,value:i}=r.target;u({...s,[b]:i})},g=r=>{const b=r.currentTarget;r.preventDefault(),b.checkValidity()===!1&&r.stopPropagation(),s.IsEdit?D(s.UserID,"Administrator","",s.TypeUserID,s.UserID,"",s.FullName,s.Email,s.Phone,s.StatusID,0,0,s.CountryID,s.PostCode,s.City,s.Address,s.PhoneOffice).then(i=>{if(i.error)m({hasError:!0,errorMessage:i.error.response.data.message});else{f(-1,{isErrorMessage:!1,message:"User has been updated"});return}}):(s.Password!==s.ConfirmPassword&&m({hasError:!0,errorMessage:"Confirm password is incorrect"}),D(s.UserID,"Administrator","",s.TypeUserID,s.UserName,s.Password,s.FullName,s.Email,s.Phone,s.StatusID,0,0,s.CountryID,s.PostCode,s.City,s.Address,s.PhoneOffice).then(i=>{if(i.error)m({hasError:!0,errorMessage:i.error.response.data.message});else{f(-1,{isErrorMessage:!1,message:"User has been created"});return}}))},[c,C]=d.useState(1);return x?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(k,{})}):e.jsxs("div",{children:[e.jsx(F,{children:e.jsx("h3",{children:"User List"})}),e.jsxs(E,{color:"danger",className:"d-flex align-items-center",visible:p.hasError,children:[e.jsx(B,{icon:G,className:"flex-shrink-0 me-2",width:24,height:24}),e.jsx("div",{children:p.errorMessage})]}),e.jsx(F,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:e.jsxs(z,{className:"row g-3",onSubmit:g,children:[e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"UIDInput",className:"col-form-label fw-bolder",children:["UID",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(n,{type:"text",id:"UIDInput",value:s.UserID,name:"UserID",onChange:a,disabled:!0})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"fullNameInput",className:"col-form-label fw-bolder",children:["Full Name",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(n,{type:"text",id:"fullNameInput",name:"FullName",required:!0,value:s.FullName,onChange:a})]}),e.jsxs(t,{xs:6,children:[e.jsx(o,{htmlFor:"emailAddressInput",className:"col-form-label fw-bolder",children:"Email Address"}),e.jsx(n,{type:"email",id:"emailAddressInput",name:"Email",value:s.Email,onChange:a})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"isAdminInput",className:"col-form-label fw-bolder",children:["Is Administrator",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(P,{type:"text",id:"isAdminInput",name:"TypeUserID",value:s.TypeUserID,options:["Open this to select menu",{label:"True",value:1},{label:"False",value:0}],onChange:a,required:!0})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"statusInput",className:"col-form-label fw-bolder",children:["Status",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(P,{type:"text",id:"statusInput",name:"StatusID",onChange:a,value:s.StatusID,options:["Open this to select menu",{label:"True",value:1},{label:"False",value:0}],required:!0})]}),e.jsxs(H,{variant:"tabs",role:"tablist",children:[e.jsx(N,{children:e.jsx(w,{"data-tab":"contact-information-tab",className:"fw-bolder",active:c===1,role:"button",onClick:()=>C(1),children:"Contact Information"})}),s.IsEdit?e.jsx(N,{children:e.jsx(w,{"data-tab":"ResetPasswordTab",href:"#!",className:"fw-bolder",role:"button",children:"Reset Password"})}):e.jsx(N,{children:e.jsx(w,{"data-tab":"accountTab",className:"fw-bolder",role:"button",active:c===2,onClick:()=>C(2),children:"Account"})})]}),e.jsxs($,{children:[e.jsx(U,{role:"tabpanel","aria-labelledby":"contact-information-tab",visible:c===1,children:e.jsxs("div",{className:"row g-3 d-flex",children:[e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"officePhoneInput",className:"col-form-label fw-bolder",children:"Office Phone"}),e.jsx(n,{type:"text",id:"officePhoneInput",value:s.PhoneOffice,onChange:a,name:"PhoneOffice"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"mobilePhoneInput",className:"col-form-label fw-bolder",children:"Mobile Phone"}),e.jsx(n,{type:"text",id:"mobilePhoneInput",value:s.Phone,onChange:a,name:"MobilePhone"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"addressInput",className:"col-form-label fw-bolder",children:"Address"}),e.jsx(n,{type:"text",id:"addressInput",value:s.Address,onChange:a,name:"Address"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"postalCodeInput",className:"col-form-label fw-bolder",children:"Postal Code"}),e.jsx(n,{type:"text",id:"postalCodeInput",value:s.PostCode,onChange:a,name:"PostCode"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"cityInput",className:"col-form-label fw-bolder",children:"City"}),e.jsx(n,{type:"text",id:"cityInput",value:s.City,onChange:a,name:"City"})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"countryInput",className:"col-form-label fw-bolder",children:["Country ",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(P,{type:"text",id:"countryInput",name:"CountryID",onChange:a,value:s.CountryID,options:["Open this to select menu",...j.map(r=>({label:r.CountryName,value:r.CountryID}))],required:!0})]})]})}),s.IsEdit?e.jsx(e.Fragment,{}):e.jsxs(U,{role:"tabpanel","aria-labelledby":"accountTab",visible:c===2,children:[e.jsxs(t,{md:12,children:[e.jsxs(o,{htmlFor:"userNameInput",className:"col-form-label fw-bolder",children:["User Name",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(n,{type:"text",id:"userNameInput",value:s.UserName,onChange:a,name:"UserName",required:!0})]}),e.jsxs(t,{md:12,children:[e.jsx(o,{htmlFor:"passwordInput",className:"col-form-label fw-bolder",children:"Password"}),e.jsx(n,{type:"password",id:"passwordInput",value:s.Password,onChange:a,name:"Password",required:!0})]}),e.jsxs(t,{md:12,children:[e.jsx(o,{htmlFor:"confirmPasswordInput",className:"col-form-label fw-bolder",children:"Confirm-Password"}),e.jsx(n,{type:"password",id:"confirmPasswordInput",value:s.ConfirmPassword,onChange:a,name:"ConfirmPassword",required:!0})]})]})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Z,{style:{width:"fit-content",marginTop:"30px"},color:"primary",type:"submit",children:s.IsEdit?"Update profile":"Create user"})})]})})]})};export{le as default};
